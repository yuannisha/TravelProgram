{"version":3,"file":"index.js","sources":["pages/index/index.vue","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<!-- 搜索栏 -->\n\t\t<view class=\"search-box\">\n\t\t\t<view class=\"search-input\" @click=\"goToSearch\">\n\t\t\t\t<text class=\"iconfont icon-search\"></text>\n\t\t\t\t<text class=\"placeholder\">搜索景点/地点</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 轮播图 -->\n\t\t<swiper class=\"banner\" circular autoplay interval=\"3000\" duration=\"1000\" indicator-dots indicator-active-color=\"#2B9939\">\n\t\t\t<swiper-item v-for=\"(item, index) in bannerList\" :key=\"index\" @click=\"goToSpotDetail(item.id)\">\n\t\t\t\t<image :src=\"item.imageUrl\" mode=\"aspectFill\"></image>\n\t\t\t</swiper-item>\n\t\t</swiper>\n\n\t\t<!-- 分类导航 -->\n\t\t<view class=\"nav-grid\">\n\t\t\t<view class=\"nav-item\" v-for=\"(item, index) in categories\" :key=\"index\" @click=\"goToCategory(item.id)\">\n\t\t\t\t<image :src=\"item.icon\" mode=\"aspectFit\"></image>\n\t\t\t\t<text>{{item.name}}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 推荐景点 -->\n\t\t<view class=\"recommend-section\">\n\t\t\t<view class=\"section-header\">\n\t\t\t\t<text class=\"title\">热门推荐</text>\n\t\t\t\t<text class=\"more\" @click=\"goToSpots\">查看更多</text>\n\t\t\t</view>\n\t\t\t<view class=\"spot-list\">\n\t\t\t\t<view class=\"spot-item\" v-for=\"(item, index) in recommendSpots\" :key=\"index\" @click=\"goToSpotDetail(item.id)\">\n\t\t\t\t\t<image :src=\"item.imageUrl\" mode=\"aspectFill\"></image>\n\t\t\t\t\t<view class=\"spot-info\">\n\t\t\t\t\t\t<text class=\"name\">{{item.name}}</text>\n\t\t\t\t\t\t<view class=\"rating\">\n\t\t\t\t\t\t\t<text class=\"score\">{{item.rating}}分</text>\n\t\t\t\t\t\t\t<text class=\"price\">¥{{item.price}}起</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n/**\n * 首页\n * @description 展示轮播图、分类导航和推荐景点\n */\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tbannerList: [],\n\t\t\tcategories: [\n\t\t\t\t{\n\t\t\t\t\tid: 1,\n\t\t\t\t\tname: '自然风光',\n\t\t\t\t\ticon: '/static/icons/nature.png'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 2,\n\t\t\t\t\tname: '人文古迹',\n\t\t\t\t\ticon: '/static/icons/culture.png'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 3,\n\t\t\t\t\tname: '特色美食',\n\t\t\t\t\ticon: '/static/icons/food.png'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 4,\n\t\t\t\t\tname: '主题乐园',\n\t\t\t\t\ticon: '/static/icons/park.png'\n\t\t\t\t}\n\t\t\t],\n\t\t\trecommendSpots: []\n\t\t}\n\t},\n\tonShow() {\n\t\tthis.getBannerList()\n\t\tthis.getRecommendSpots()\n\t},\n\tmethods: {\n\t\t// 获取轮播图数据\n\t\tasync getBannerList() {\n\t\t\ttry {\n\t\t\t\tconst res = await uniCloud.callFunction({\n\t\t\t\t\tname: 'get-spots',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\tpageSize: 3,\n\t\t\t\t\t\tsortBy: 'rating',\n\t\t\t\t\t\tsortOrder: 'desc'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tconsole.log(\"轮播图结果：\",res)\t\n\t\t\t\tif (res.result.code === 0) {\n\t\t\t\t\tthis.bannerList = res.result.data.list.map(item => ({\n\t\t\t\t\t\tid: item._id,\n\t\t\t\t\t\timageUrl: item.imageUrl\n\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('获取轮播图失败:', e)\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 获取推荐景点\n\t\tasync getRecommendSpots() {\n\t\t\ttry {\n\t\t\t\tconst res = await uniCloud.callFunction({\n\t\t\t\t\tname: 'get-spots',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\tpageSize: 6,\n\t\t\t\t\t\tsortBy: 'commentCount',\n\t\t\t\t\t\tsortOrder: 'desc'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tconsole.log(\"推荐景点结果：\",res)\t\n\t\t\t\tif (res.result.code === 0) {\n\t\t\t\t\tthis.recommendSpots = res.result.data.list.map(item => ({\n\t\t\t\t\t\tid: item._id,\n\t\t\t\t\t\tname: item.name,\n\t\t\t\t\t\timageUrl: item.imageUrl,\n\t\t\t\t\t\trating: item.rating,\n\t\t\t\t\t\tprice: item.price / 100 // 转换为元\n\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('获取推荐景点失败:', e)\n\t\t\t}\n\t\t},\n\t\t// 跳转到搜索页\n\t\tgoToSearch() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/spots/search'\n\t\t\t})\n\t\t},\n\t\tgoToSpotDetail(id) {\n\t\t\t// 跳转到景点详情页\n\t\t\tuni.navigateTo({\n\t\t\t\turl: `/pages/spots/detail?id=${id}`\n\t\t\t})\n\t\t},\n\t\tgoToCategory(id) {\n\t\t\t// 跳转到分类页面\n\t\t\tuni.switchTab({\n\t\t\t\turl: '/pages/spots/spots'\n\t\t\t})\n\t\t},\n\t\tgoToSpots() {\n\t\t\t// 跳转到景点列表页\n\t\t\tuni.switchTab({\n\t\t\t\turl: '/pages/spots/spots'\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.container {\n\tpadding-bottom: 20rpx;\n}\n\n.search-box {\n\tdisplay: flex;\n\talign-items: center;\n\tbackground-color: #fff;\n\tborder-radius: 36rpx;\n\tpadding: 0 30rpx;\n\theight: 72rpx;\n\tmargin: 20rpx 30rpx;\n\t\n\t.iconfont {\n\t\tfont-size: 36rpx;\n\t\tcolor: #999;\n\t\tmargin-right: 10rpx;\n\t}\n\t\n\tinput {\n\t\tflex: 1;\n\t\theight: 100%;\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\t\n\t\t&::placeholder {\n\t\t\tcolor: #999;\n\t\t}\n\t}\n}\n\n.banner {\n\twidth: 100%;\n\theight: 300rpx;\n\t\n\timage {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n}\n\n.nav-grid {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tpadding: 30rpx 20rpx;\n\tbackground-color: #fff;\n\t\n\t.nav-item {\n\t\twidth: 25%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tpadding: 20rpx 0;\n\t\t\n\t\timage {\n\t\t\twidth: 80rpx;\n\t\t\theight: 80rpx;\n\t\t\tmargin-bottom: 10rpx;\n\t\t}\n\t\t\n\t\ttext {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #333;\n\t\t}\n\t}\n}\n\n.recommend-section {\n\tmargin-top: 20rpx;\n\tbackground-color: #fff;\n\tpadding: 20rpx;\n\t\n\t.section-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 20rpx;\n\t\t\n\t\t.title {\n\t\t\tfont-size: 32rpx;\n\t\t\tfont-weight: bold;\n\t\t\tcolor: #333;\n\t\t}\n\t\t\n\t\t.more {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #666;\n\t\t}\n\t}\n\t\n\t.spot-list {\n\t\t.spot-item {\n\t\t\tmargin-bottom: 20rpx;\n\t\t\t\n\t\t\timage {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 300rpx;\n\t\t\t\tborder-radius: 12rpx;\n\t\t\t}\n\t\t\t\n\t\t\t.spot-info {\n\t\t\t\tpadding: 16rpx 10rpx;\n\t\t\t\t\n\t\t\t\t.name {\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.rating {\n\t\t\t\t\tmargin-top: 10rpx;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\n\t\t\t\t\t.score {\n\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\tcolor: #FF9500;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.price {\n\t\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\tcolor: #FF5B05;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import MiniProgramPage from 'D:/programs2024to2025/ranjiangtaoprogram/first/TravelPlatformMiniProgram/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","uni"],"mappings":";;AAoDA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,YAAY,CAAE;AAAA,MACd,YAAY;AAAA,QACX;AAAA,UACC,IAAI;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,QACN;AAAA,QACD;AAAA,UACC,IAAI;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,QACN;AAAA,QACD;AAAA,UACC,IAAI;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,QACN;AAAA,QACD;AAAA,UACC,IAAI;AAAA,UACJ,MAAM;AAAA,UACN,MAAM;AAAA,QACP;AAAA,MACA;AAAA,MACD,gBAAgB,CAAC;AAAA,IAClB;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,cAAc;AACnB,SAAK,kBAAkB;AAAA,EACvB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,MAAM,gBAAgB;AACrB,UAAI;AACH,cAAM,MAAM,MAAMA,cAAQ,GAAC,aAAa;AAAA,UACvC,MAAM;AAAA,UACN,MAAM;AAAA,YACL,MAAM;AAAA,YACN,UAAU;AAAA,YACV,QAAQ;AAAA,YACR,WAAW;AAAA,UACZ;AAAA,SACA;AACDC,sBAAAA,MAAY,MAAA,OAAA,+BAAA,UAAS,GAAG;AACxB,YAAI,IAAI,OAAO,SAAS,GAAG;AAC1B,eAAK,aAAa,IAAI,OAAO,KAAK,KAAK,IAAI,WAAS;AAAA,YACnD,IAAI,KAAK;AAAA,YACT,UAAU,KAAK;AAAA,UAChB,EAAE;AAAA,QACH;AAAA,MACD,SAAS,GAAG;AACXA,sBAAAA,MAAc,MAAA,SAAA,gCAAA,YAAY,CAAC;AAAA,MAC5B;AAAA,IACA;AAAA;AAAA,IAGD,MAAM,oBAAoB;AACzB,UAAI;AACH,cAAM,MAAM,MAAMD,cAAQ,GAAC,aAAa;AAAA,UACvC,MAAM;AAAA,UACN,MAAM;AAAA,YACL,MAAM;AAAA,YACN,UAAU;AAAA,YACV,QAAQ;AAAA,YACR,WAAW;AAAA,UACZ;AAAA,SACA;AACDC,sBAAAA,mDAAY,WAAU,GAAG;AACzB,YAAI,IAAI,OAAO,SAAS,GAAG;AAC1B,eAAK,iBAAiB,IAAI,OAAO,KAAK,KAAK,IAAI,WAAS;AAAA,YACvD,IAAI,KAAK;AAAA,YACT,MAAM,KAAK;AAAA,YACX,UAAU,KAAK;AAAA,YACf,QAAQ,KAAK;AAAA,YACb,OAAO,KAAK,QAAQ;AAAA;AAAA,UACrB,EAAE;AAAA,QACH;AAAA,MACD,SAAS,GAAG;AACXA,sBAAAA,qDAAc,aAAa,CAAC;AAAA,MAC7B;AAAA,IACA;AAAA;AAAA,IAED,aAAa;AACZA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA,IACD,eAAe,IAAI;AAElBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,0BAA0B,EAAE;AAAA,OACjC;AAAA,IACD;AAAA,IACD,aAAa,IAAI;AAEhBA,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK;AAAA,OACL;AAAA,IACD;AAAA,IACD,YAAY;AAEXA,oBAAAA,MAAI,UAAU;AAAA,QACb,KAAK;AAAA,OACL;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChKA,GAAG,WAAW,eAAe;"}