{"version":3,"file":"user.js","sources":["pages/user/user.vue","E:/HBuilderX/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci91c2VyLnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<!-- 用户信息卡片 -->\n\t\t<view class=\"user-card\">\n\t\t\t<view class=\"user-info\" @click=\"goToLogin\" v-if=\"!isLogin\">\n\t\t\t\t<image class=\"avatar\" src=\"/static/avatar/default-avatar.png\" mode=\"aspectFill\"></image>\n\t\t\t\t<text class=\"login-text\">登录/注册</text>\n\t\t\t</view>\n\t\t\t<view class=\"user-info\" v-else>\n\t\t\t\t<image class=\"avatar\" :src=\"userInfo.avatar\" mode=\"aspectFill\" @click=\"goToAvatar\"></image>\n\t\t\t\t<view class=\"info-right\">\n\t\t\t\t\t<text class=\"username\">{{userInfo.username}}</text>\n\t\t\t\t\t<text class=\"user-id\">ID: {{userInfo.id}}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 功能列表 -->\n\t\t<view class=\"menu-list\">\n\t\t\t<view class=\"menu-group\">\n\t\t\t\t<view class=\"menu-item\" @click=\"goToProfile\">\n\t\t\t\t\t<view class=\"left\">\n\t\t\t\t\t\t<text class=\"iconfont icon-user\"></text>\n\t\t\t\t\t\t<text class=\"title\">个人信息</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"iconfont icon-arrow-right\"></text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"menu-item\" @click=\"goToFavorites\">\n\t\t\t\t\t<view class=\"left\">\n\t\t\t\t\t\t<text class=\"iconfont icon-heart\"></text>\n\t\t\t\t\t\t<text class=\"title\">我的收藏</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"iconfont icon-arrow-right\"></text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"menu-item\" @click=\"goToPlans\">\n\t\t\t\t\t<view class=\"left\">\n\t\t\t\t\t\t<text class=\"iconfont icon-calendar\"></text>\n\t\t\t\t\t\t<text class=\"title\">我的旅行计划</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"iconfont icon-arrow-right\"></text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"menu-group\">\n\t\t\t\t<view class=\"menu-item\" @click=\"goToSettings\">\n\t\t\t\t\t<view class=\"left\">\n\t\t\t\t\t\t<text class=\"iconfont icon-settings\"></text>\n\t\t\t\t\t\t<text class=\"title\">设置</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"iconfont icon-arrow-right\"></text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"menu-item\" @click=\"goToAbout\">\n\t\t\t\t\t<view class=\"left\">\n\t\t\t\t\t\t<text class=\"iconfont icon-info\"></text>\n\t\t\t\t\t\t<text class=\"title\">关于我们</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"iconfont icon-arrow-right\"></text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 退出登录按钮 -->\n\t\t<button class=\"logout-btn\" v-if=\"isLogin\" @click=\"logout\">退出登录</button>\n\t</view>\n</template>\n\n<script>\n/**\n * 用户中心页面\n * @description 展示用户信息，提供各种功能入口\n */\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tisLogin: false,\n\t\t\tuserInfo: null\n\t\t}\n\t},\n\tonShow() {\n\t\tconst app = getApp();\n\t\tapp.globalData.checkLoginStatus(true); \n\t\t// 检查登录状态\n\t\tthis.checkLoginStatus()\n\t},\n\tonLoad() {\n\t\t// 页面加载时检查登录状态\n\t\tconst app = getApp();\n\t\tapp.globalData.checkLoginStatus(true); \n\t},\n\tmethods: {\n\t\t// 检查登录状态\n\t\tcheckLoginStatus() {\n\t\t\t// TODO: 实际项目中需要检查登录状态\n\t\t\tconst token = uni.getStorageSync('token')\n\t\t\tthis.isLogin = !!token\n\t\t\tif (this.isLogin) {\n\t\t\t\t//this.getUserInfo()\n\t\t\t\tthis.userInfo = uni.getStorageSync('userInfo')\n\t\t\t\tconsole.log(this.userInfo)\n\t\t\t}else{\n\t\t\t\tthis.userInfo = {\n\t\t\t\t\tavatar: '/static/avatar/default-avatar.png',\n\n\t\t\t\t\tusername: '游客',\n\t\t\t\t\tuserId: '10001'\n\t\t\t\t}\n\t\t\t}\n\t\t},\t\n\n\t\t// 获取用户信息\n\t\tasync getUserInfo() {\n\t\t\t// TODO: 调用后端接口获取用户信息\n\t\t\tuni.getStorageSync('userInfo', res.result.userInfo)\n\t\t},\n\t\t\n\t\t// 跳转到登录页\n\t\tgoToLogin() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/user/login'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 跳转到收藏页\n\t\tgoToFavorites() {\n\t\t\tif (!this.isLogin) {\n\t\t\t\tthis.goToLogin()\n\t\t\t\treturn\n\t\t\t}\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/user/favorites'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 跳转到旅行计划页\n\t\tgoToPlans() {\n\t\t\tif (!this.isLogin) {\n\t\t\t\tthis.goToLogin()\n\t\t\t\treturn\n\t\t\t}\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/plans/plans'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 跳转到设置页\n\t\tgoToSettings() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/user/settings'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 跳转到关于页\n\t\tgoToAbout() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/user/about'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 跳转到头像页面\n\t\tgoToAvatar() {\n\t\t\tif (!this.isLogin) return\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/user/avatar'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 跳转到个人信息页\n\t\tgoToProfile() {\n\t\t\tif (!this.isLogin) {\n\t\t\t\tthis.goToLogin()\n\t\t\t\treturn\n\t\t\t}\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/user/profile'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 退出登录\n\t\tlogout() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定要退出登录吗？',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tuni.removeStorageSync('token')\n\t\t\t\t\t\tthis.isLogin = false\n\t\t\t\t\t\tthis.userInfo = {\n\t\t\t\t\t\t\tavatar: '/static/avatar/default-avatar.png',\n\t\t\t\t\t\t\tusername: '游客',\n\t\t\t\t\t\t\tuserId: '10001'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '已退出登录',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.container {\n\tmin-height: 100vh;\n\tbackground-color: #f5f5f5;\n}\n\n.user-card {\n\tbackground-color: #2B9939;\n\tpadding: 40rpx 30rpx;\n\t\n\t.user-info {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\t\n\t\t.avatar {\n\t\t\twidth: 120rpx;\n\t\t\theight: 120rpx;\n\t\t\tborder-radius: 60rpx;\n\t\t\tborder: 4rpx solid rgba(255, 255, 255, 0.2);\n\t\t}\n\t\t\n\t\t.login-text {\n\t\t\tmargin-left: 30rpx;\n\t\t\tfont-size: 36rpx;\n\t\t\tcolor: #fff;\n\t\t\tfont-weight: bold;\n\t\t}\n\t\t\n\t\t.info-right {\n\t\t\tmargin-left: 30rpx;\n\t\t\t\n\t\t\t.username {\n\t\t\t\tfont-size: 36rpx;\n\t\t\t\tcolor: #fff;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tmargin-bottom: 10rpx;\n\t\t\t}\n\t\t\t\n\t\t\t.user-id {\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: rgba(255, 255, 255, 0.8);\n\t\t\t}\n\t\t}\n\t}\n}\n\n.menu-list {\n\tpadding: 20rpx;\n\t\n\t.menu-group {\n\t\tbackground-color: #fff;\n\t\tborder-radius: 12rpx;\n\t\tmargin-bottom: 20rpx;\n\t\t\n\t\t.menu-item {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tpadding: 30rpx;\n\t\t\tborder-bottom: 1rpx solid #eee;\n\t\t\t\n\t\t\t&:last-child {\n\t\t\t\tborder-bottom: none;\n\t\t\t}\n\t\t\t\n\t\t\t.left {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\t\n\t\t\t\t.iconfont {\n\t\t\t\t\tfont-size: 40rpx;\n\t\t\t\t\tmargin-right: 20rpx;\n\t\t\t\t\t\n\t\t\t\t\t&.icon-heart {\n\t\t\t\t\t\tcolor: #FF5B05;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t&.icon-history {\n\t\t\t\t\t\tcolor: #2B9939;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t&.icon-settings {\n\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t&.icon-info {\n\t\t\t\t\t\tcolor: #2B9939;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.title {\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.icon-arrow-right {\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: #999;\n\t\t\t}\n\t\t}\n\t}\n}\n\n.logout-btn {\n\tmargin: 40rpx 30rpx;\n\theight: 80rpx;\n\tline-height: 80rpx;\n\ttext-align: center;\n\tbackground-color: #fff;\n\tborder-radius: 40rpx;\n\tcolor: #FF5B05;\n\tfont-size: 28rpx;\n\t\n\t&::after {\n\t\tborder: none;\n\t}\n}\n</style> ","import MiniProgramPage from 'D:/programs2024to2025/ranjiangtaoprogram/first/TravelPlatformMiniProgram/pages/user/user.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","res"],"mappings":";;;AAuEA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,EACA;AAAA,EACD,SAAS;AACR,UAAM,MAAM;AACZ,QAAI,WAAW,iBAAiB,IAAI;AAEpC,SAAK,iBAAiB;AAAA,EACtB;AAAA,EACD,SAAS;AAER,UAAM,MAAM;AACZ,QAAI,WAAW,iBAAiB,IAAI;AAAA,EACpC;AAAA,EACD,SAAS;AAAA;AAAA,IAER,mBAAmB;AAElB,YAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AACxC,WAAK,UAAU,CAAC,CAAC;AACjB,UAAI,KAAK,SAAS;AAEjB,aAAK,WAAWA,oBAAI,eAAe,UAAU;AAC7CA,sBAAAA,MAAY,MAAA,OAAA,6BAAA,KAAK,QAAQ;AAAA,aACrB;AACJ,aAAK,WAAW;AAAA,UACf,QAAQ;AAAA,UAER,UAAU;AAAA,UACV,QAAQ;AAAA,QACT;AAAA,MACD;AAAA,IACA;AAAA;AAAA,IAGD,MAAM,cAAc;AAEnBA,oBAAAA,MAAI,eAAe,YAAY,IAAI,OAAO,QAAQ;AAAA,IAClD;AAAA;AAAA,IAGD,YAAY;AACXA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA;AAAA,IAGD,gBAAgB;AACf,UAAI,CAAC,KAAK,SAAS;AAClB,aAAK,UAAU;AACf;AAAA,MACD;AACAA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA;AAAA,IAGD,YAAY;AACX,UAAI,CAAC,KAAK,SAAS;AAClB,aAAK,UAAU;AACf;AAAA,MACD;AACAA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA;AAAA,IAGD,eAAe;AACdA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA;AAAA,IAGD,YAAY;AACXA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA;AAAA,IAGD,aAAa;AACZ,UAAI,CAAC,KAAK;AAAS;AACnBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA;AAAA,IAGD,cAAc;AACb,UAAI,CAAC,KAAK,SAAS;AAClB,aAAK,UAAU;AACf;AAAA,MACD;AACAA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,OACL;AAAA,IACD;AAAA;AAAA,IAGD,SAAS;AACRA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAAC,SAAO;AACf,cAAIA,KAAI,SAAS;AAChBD,0BAAG,MAAC,kBAAkB,OAAO;AAC7B,iBAAK,UAAU;AACf,iBAAK,WAAW;AAAA,cACf,QAAQ;AAAA,cACR,UAAU;AAAA,cACV,QAAQ;AAAA,YACT;AACAA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,aACN;AAAA,UACF;AAAA,QACD;AAAA,OACA;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;ACvMA,GAAG,WAAW,eAAe;"}